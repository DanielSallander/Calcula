# Pivot table filter

We need to address these issues in the pivot table filter feature:
- The application crashes when clicking the drop down menu in the pivot filters.
Check the console messages below.
- Now the pivot filter appear as a pane in the pivot table (as shown in the attached image).
But they should be layouted in the grid, just as the pivot table rows, columns and values are layouted in the grid.
It should work as it does in Excel. So if I add two fields in the pivot table filter area, there should be two rows in the pivot table with drop down lists in each.

Console messages after clicking drop down menu:
PivotFilterOverlay.tsx:265 [PivotFilterOverlay] Render check: {filterStatesLength: 1, activePivotId: 1, pivotRegionsCount: 1, pivotRegions: Array(1)}
PivotFilterOverlay.tsx:285 [PivotFilterOverlay] Found pivot region: {pivotId: 1, startRow: 8, startCol: 1, endRow: 25, endCol: 3, …}
PivotFilterOverlay.tsx:309 [PivotFilterOverlay] Calculated position: {x: 150, y: 216, width: 300, filterRowHeight: 32}
FilterDropdown.tsx:230  Uncaught TypeError: Cannot read properties of undefined (reading 'x')
    at FilterDropdown (FilterDropdown.tsx:230:26)
    at renderWithHooks (react-dom.development.js:15486:18)
    at mountIndeterminateComponent (react-dom.development.js:20103:13)
    at beginWork (react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback2 (react-dom.development.js:4164:14)
    at Object.invokeGuardedCallbackDev (react-dom.development.js:4213:16)
    at invokeGuardedCallback (react-dom.development.js:4277:31)
    at beginWork$1 (react-dom.development.js:27490:7)
    at performUnitOfWork (react-dom.development.js:26596:12)
    at workLoopSync (react-dom.development.js:26505:5)
FilterDropdown @ FilterDropdown.tsx:230
renderWithHooks @ react-dom.development.js:15486
mountIndeterminateComponent @ react-dom.development.js:20103
beginWork @ react-dom.development.js:21626
callCallback2 @ react-dom.development.js:4164
invokeGuardedCallbackDev @ react-dom.development.js:4213
invokeGuardedCallback @ react-dom.development.js:4277
beginWork$1 @ react-dom.development.js:27490
performUnitOfWork @ react-dom.development.js:26596
workLoopSync @ react-dom.development.js:26505
renderRootSync @ react-dom.development.js:26473
performSyncWorkOnRoot @ react-dom.development.js:26124
flushSyncCallbacks @ react-dom.development.js:12042
(anonymous) @ react-dom.development.js:25690
PivotFilterOverlay.tsx:265 [PivotFilterOverlay] Render check: {filterStatesLength: 1, activePivotId: 1, pivotRegionsCount: 1, pivotRegions: Array(1)}
PivotFilterOverlay.tsx:285 [PivotFilterOverlay] Found pivot region: {pivotId: 1, startRow: 8, startCol: 1, endRow: 25, endCol: 3, …}
PivotFilterOverlay.tsx:309 [PivotFilterOverlay] Calculated position: {x: 150, y: 216, width: 300, filterRowHeight: 32}
PivotFilterOverlay.tsx:265 [PivotFilterOverlay] Render check: {filterStatesLength: 1, activePivotId: 1, pivotRegionsCount: 1, pivotRegions: Array(1)}
PivotFilterOverlay.tsx:285 [PivotFilterOverlay] Found pivot region: {pivotId: 1, startRow: 8, startCol: 1, endRow: 25, endCol: 3, …}
PivotFilterOverlay.tsx:309 [PivotFilterOverlay] Calculated position: {x: 150, y: 216, width: 300, filterRowHeight: 32}
FilterDropdown.tsx:230  Uncaught TypeError: Cannot read properties of undefined (reading 'x')
    at FilterDropdown (FilterDropdown.tsx:230:26)
    at renderWithHooks (react-dom.development.js:15486:18)
    at mountIndeterminateComponent (react-dom.development.js:20103:13)
    at beginWork (react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback2 (react-dom.development.js:4164:14)
    at Object.invokeGuardedCallbackDev (react-dom.development.js:4213:16)
    at invokeGuardedCallback (react-dom.development.js:4277:31)
    at beginWork$1 (react-dom.development.js:27490:7)
    at performUnitOfWork (react-dom.development.js:26596:12)
    at workLoopSync (react-dom.development.js:26505:5)
FilterDropdown @ FilterDropdown.tsx:230
renderWithHooks @ react-dom.development.js:15486
mountIndeterminateComponent @ react-dom.development.js:20103
beginWork @ react-dom.development.js:21626
callCallback2 @ react-dom.development.js:4164
invokeGuardedCallbackDev @ react-dom.development.js:4213
invokeGuardedCallback @ react-dom.development.js:4277
beginWork$1 @ react-dom.development.js:27490
performUnitOfWork @ react-dom.development.js:26596
workLoopSync @ react-dom.development.js:26505
renderRootSync @ react-dom.development.js:26473
recoverFromConcurrentError @ react-dom.development.js:25889
performSyncWorkOnRoot @ react-dom.development.js:26135
flushSyncCallbacks @ react-dom.development.js:12042
(anonymous) @ react-dom.development.js:25690
react-dom.development.js:18704  The above error occurred in the <FilterDropdown> component:

    at FilterDropdown (http://localhost:5173/src/core/components/pivot/FilterDropdown.tsx:169:3)
    at div
    at PivotFilterOverlay (http://localhost:5173/src/core/components/pivot/PivotFilterOverlay.tsx:88:3)
    at div
    at D2 (http://localhost:5173/node_modules/.vite/deps/styled-components.js?v=78cb1537:1270:7)
    at div
    at D2 (http://localhost:5173/node_modules/.vite/deps/styled-components.js?v=78cb1537:1270:7)
    at div
    at D2 (http://localhost:5173/node_modules/.vite/deps/styled-components.js?v=78cb1537:1270:7)
    at SpreadsheetContent (http://localhost:5173/src/core/components/Spreadsheet/Spreadsheet.tsx:41:31)
    at Spreadsheet (http://localhost:5173/src/core/components/Spreadsheet/Spreadsheet.tsx:595:31)
    at div
    at div
    at div
    at LayoutInner (http://localhost:5173/src/shell/Layout.tsx:45:21)
    at GridProvider (http://localhost:5173/src/core/state/GridContext.tsx:22:32)
    at Layout
    at GridProvider (http://localhost:5173/src/core/state/GridContext.tsx:22:32)
    at ThemeRoot (http://localhost:5173/src/core/theme/ThemeRoot.tsx:20:29)
    at App

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
logCapturedError @ react-dom.development.js:18704
update.callback @ react-dom.development.js:18737
callCallback @ react-dom.development.js:15036
commitUpdateQueue @ react-dom.development.js:15057
commitLayoutEffectOnFiber @ react-dom.development.js:23430
commitLayoutMountEffects_complete @ react-dom.development.js:24727
commitLayoutEffects_begin @ react-dom.development.js:24713
commitLayoutEffects @ react-dom.development.js:24651
commitRootImpl @ react-dom.development.js:26862
commitRoot @ react-dom.development.js:26721
performSyncWorkOnRoot @ react-dom.development.js:26156
flushSyncCallbacks @ react-dom.development.js:12042
(anonymous) @ react-dom.development.js:25690
react-dom.development.js:12056  Uncaught TypeError: Cannot read properties of undefined (reading 'x')
    at FilterDropdown (FilterDropdown.tsx:230:26)
    at renderWithHooks (react-dom.development.js:15486:18)
    at mountIndeterminateComponent (react-dom.development.js:20103:13)
    at beginWork (react-dom.development.js:21626:16)
    at beginWork$1 (react-dom.development.js:27465:14)
    at performUnitOfWork (react-dom.development.js:26596:12)
    at workLoopSync (react-dom.development.js:26505:5)
    at renderRootSync (react-dom.development.js:26473:7)
    at recoverFromConcurrentError (react-dom.development.js:25889:20)
    at performSyncWorkOnRoot (react-dom.development.js:26135:20)
FilterDropdown @ FilterDropdown.tsx:230
renderWithHooks @ react-dom.development.js:15486
mountIndeterminateComponent @ react-dom.development.js:20103
beginWork @ react-dom.development.js:21626
beginWork$1 @ react-dom.development.js:27465
performUnitOfWork @ react-dom.development.js:26596
workLoopSync @ react-dom.development.js:26505
renderRootSync @ react-dom.development.js:26473
recoverFromConcurrentError @ react-dom.development.js:25889
performSyncWorkOnRoot @ react-dom.development.js:26135
flushSyncCallbacks @ react-dom.development.js:12042
(anonymous) @ react-dom.development.js:25690